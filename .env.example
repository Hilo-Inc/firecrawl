# Firecrawl Environment Configuration
# Copy this file to .env and update with your own values

# ============================================
# MANDATORY CONFIGURATION
# ============================================

# Server Configuration
# Port on which the Firecrawl API will be exposed
PORT=3002

# Internal port (usually same as PORT)
INTERNAL_PORT=3002

# Host binding (use 0.0.0.0 for Docker)
HOST=0.0.0.0

# Database Authentication
# Set to true if using Supabase authentication, false for basic self-hosted
USE_DB_AUTHENTICATION=false

# ============================================
# DATABASE CONFIGURATION
# ============================================

# PostgreSQL Connection
# Format: postgresql://username:password@host:port/database
NUQ_DATABASE_URL=postgresql://postgres:postgres@postgres:5432/postgres

# PostgreSQL Credentials (used by postgres container)
POSTGRES_USER=postgres
POSTGRES_PASSWORD=postgres
POSTGRES_DB=postgres
POSTGRES_PORT=5432

# ============================================
# REDIS CONFIGURATION
# ============================================

# Redis connection for caching and job queues
REDIS_URL=redis://redis:6379

# Redis for rate limiting (can be same as REDIS_URL)
REDIS_RATE_LIMIT_URL=redis://redis:6379

# ============================================
# PLAYWRIGHT SERVICE CONFIGURATION
# ============================================

# Playwright microservice endpoint (internal Docker network)
PLAYWRIGHT_MICROSERVICE_URL=http://playwright-service:3000/scrape

# Block media (images, videos) to speed up scraping
BLOCK_MEDIA=false

# ============================================
# WORKER CONFIGURATION
# ============================================

# Extract worker port
EXTRACT_WORKER_PORT=3004

# General worker port
WORKER_PORT=3005

# ============================================
# ENVIRONMENT
# ============================================

# Environment mode: local, development, production
ENV=production

# Logging level: debug, info, warn, error
LOGGING_LEVEL=info

# ============================================
# OPTIONAL: AI & OPENAI INTEGRATION
# ============================================

# OpenAI API key for JSON formatting and data extraction
# Leave empty if not using AI features
OPENAI_API_KEY=

# OpenAI base URL (optional, for custom endpoints)
OPENAI_BASE_URL=

# Model name for text generation
MODEL_NAME=gpt-4o-mini

# Model for embeddings
MODEL_EMBEDDING_NAME=text-embedding-3-small

# ============================================
# OPTIONAL: OLLAMA INTEGRATION
# ============================================

# Ollama base URL for local AI models (experimental)
OLLAMA_BASE_URL=

# ============================================
# OPTIONAL: PROXY CONFIGURATION
# ============================================

# Proxy server URL (format: http://proxy.example.com:8080)
PROXY_SERVER=

# Proxy authentication
PROXY_USERNAME=
PROXY_PASSWORD=

# ============================================
# OPTIONAL: SEARCH API INTEGRATION
# ============================================

# Serper API key for Google search
SERPER_API_KEY=

# SearchAPI key for alternative search
SEARCHAPI_API_KEY=

# SearXNG custom search engine
SEARXNG_ENDPOINT=
SEARXNG_ENGINES=
SEARXNG_CATEGORIES=

# ============================================
# OPTIONAL: STOCK SCRAPING CONFIGURATION
# ============================================

# Search mode for stock scraping
# Options: "investingcom-api" (default) or "firecrawl-search"
# - investingcom-api: Uses Investing.com's search API directly (faster, more reliable)
# - firecrawl-search: Uses Firecrawl's search to find stock pages (requires SERPER_API_KEY or other search provider)
INVESTING_COM_SEARCH_MODE=investingcom-api

# Directory for saving stock markdown files
# Default: ./stock-output
STOCK_SCRAPER_OUTPUT_DIR=./stock-output

# ============================================
# OPTIONAL: SUPABASE INTEGRATION
# ============================================

# Supabase credentials (for authentication and logging)
SUPABASE_URL=
SUPABASE_ANON_TOKEN=
SUPABASE_SERVICE_TOKEN=

# ============================================
# OPTIONAL: ANALYTICS & MONITORING
# ============================================

# PostHog analytics
POSTHOG_API_KEY=
POSTHOG_HOST=

# ============================================
# OPTIONAL: NOTIFICATIONS
# ============================================

# Slack webhook for health status notifications
SLACK_WEBHOOK_URL=

# Self-hosted webhook URL for custom notifications
SELF_HOSTED_WEBHOOK_URL=

# ============================================
# OPTIONAL: SECURITY
# ============================================

# Bull Queue Manager authentication key
# IMPORTANT: Change this in production deployments!
BULL_AUTH_KEY=CHANGE_THIS_IN_PRODUCTION

# Test API key for development
TEST_API_KEY=

# ============================================
# COOLIFY SPECIFIC (Optional)
# ============================================

# Domain for your Firecrawl instance
# DOMAIN=firecrawl.yourdomain.com

# SSL/TLS configuration (handled by Coolify reverse proxy)
# ENABLE_SSL=true
